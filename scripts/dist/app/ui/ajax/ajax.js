define(["jquery","pubsub"],function(e){return{init:function(){e.subscribe("/ajax/get",e.proxy(this._processRequest,this))},_processRequest:function(e){var t=this._generateCallback(e.id,e.callback);this._getContent(e.url,e.id,t)},_generateCallback:function(e,t){var n=this;return t?function(r){n._publishResponseEvent(e,r),t(r)}:function(t){n._publishResponseEvent(e,t)}},_getContent:function(t,n,r){e.ajax({url:t,success:r})},_publishResponseEvent:function(t,n){e.publish("/ajax/ready/"+t,[{html:n}])}}});