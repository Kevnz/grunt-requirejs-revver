define("app/ui/page/listing",["jquery","app/ui/mediaqueries/mediaqueries","app/ui/infinitescroll/infinitescroll","app/availability/availability","app/util/useragent"],function(e,t,n,r,i){return{$rotator:e(".js-rotator-listing"),$search:e(".js-listing-search"),$searchButton:e(".js-listing-search-button"),$searchSubmit:e(".js-listing-search-submit"),$sort:e("#sortInput"),queries:{"listing-search-medium":"screen and (max-width: 639px)"},init:function(){n.init(),r.init(),this.bindGenericListingSortInput(),this.bindRotator(),this.bindListForm(),this.bindListFormButton(),this.bindDatepickerInput()},bindGenericListingSortInput:function(){this.$sort.change(function(){location.href=e(this).find("option:selected").data("href")})},bindRotator:function(){this.$rotator&&require(["app/ui/rotator/listing"],function(t){e(document).ready(function(){t.init()})})},bindDatepickerInput:function(){var t=e("#CheckInDateInput");if(!t.length)return;if(i.isIOS()){t.attr("type","date");return}require(["datepicker"],function(){t.datepicker({dateFormat:"yy-mm-dd"})})},bindListForm:function(){var n=this;this.$search&&t.register({queries:this.queries["listing-search-medium"],shouldDegrade:!0,match:function(){require(["expandcollapse"],function(){e(document).ready(function(){n.$search.expandCollapse()})})},unmatch:function(){require(["expandcollapse"],function(){e(document).ready(function(){n.$search.expandCollapse("destroy")})})}})},bindListFormButton:function(){this.$searchButton.on("click",{module:this},function(e){e.preventDefault();var t=e.data.module;t.$search.find(t.$searchSubmit).trigger("click")})}}});