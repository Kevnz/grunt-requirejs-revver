(function(e,t){function n(e,n,s){var o="https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name="+e+"&count="+n+"&callback=?";t.getJSON(o,function(t){if(t!==null&&t.length&&t[0].created_at!==undefined){var o="",u=90;for(var a=0,f=Math.min(t.length,n);a<f;a++){var l=t[a],c=l.text.split(" ",u).join(" "),h="https://www.twitter.com/"+e,p="https://www.twitter.com/"+e+"/status/"+l.id_str;o+="<p>"+i(c)+"</p>",o+='<cite class="twitter-name golf"><a href target="_blank">@'+e+"</a> "+r(l.created_at)+"</cite>",o=o.replace(/(href target)/,'href="'+h+'" target')}s(o)}})}function r(e){var n=new Date,r=new Date(e);t(".oldie, .ie9").length&&(r=Date.parse(e.replace(/( \+)/," UTC$1")));var i=n-r,s=1e3,o=s*60,u=o*60,a=u*24;return isNaN(i)||i<0?"":i<s*7?"right now":i<o?Math.floor(i/s)+" seconds ago":i<o*2?"about 1 minute ago":i<u?Math.floor(i/o)+" minutes ago":i<u*2?"about 1 hour ago":i<a?Math.floor(i/u)+" hours ago":i>a&&i<a*2?"yesterday":i<a*365?Math.floor(i/a)+" days ago":"over a year ago"}function i(e){return e.replace(/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi,'<a href="$1" target="_blank">$1</a>').replace(/(^|\s)#(\w+)/g,'$1<a href="http://search.twitter.com/search?q=%23$2" target="_blank">#$2</a>').replace(/(^|\s)@(\w+)/g,'$1<a href="http://twitter.com/$2" target="_blank">@$2</a>')}function s(){}s.init=function(e,r,i){n(e,r,function(e){t(i).html(e)})},e.Twitter=s})(window,jQuery,undefined),define("twitter",["jquery"],function(e){return function(){var t,n;return t||e.Twitter}}(this)),define("app/ui/rotator/homepage",["jquery","brotator"],function(e){return{$homepageRotator:null,bind:function(){this.$homepageRotator=e(".js-rotator-homepage"),this.$homepageRotator.brotator({content:".js-rotator-homepage-content",timeout:8e3,easing:"easeInOutSine",contentSetup:"responsive",hasMenu:!1,hasButtons:!0,next:".js-next",previous:".js-prev",animationSpeed:500,lazyloader:!0,namespace:"/homepage-rotator",animation:"slide",autorotate:!1})},unbind:function(){this.$homepageRotator.brotator("destroy")},startTimer:function(){this.$homepageRotator.trigger("start.timer.brotator")},stopTimer:function(){this.$homepageRotator.trigger("stop.timer.brotator")}}}),define("app/ui/page/homepage",["jquery","twitter","app/ui/mediaqueries/mediaqueries","app/ui/rotator/homepage","evensteven"],function(e,t,n,r){return{init:function(){this._initTwitter(),this._initRotator(),this._initCarousel(),this._initEqualisation(),this._initPositioningStatement()},_initPositioningStatement:function(){var t=e(".pod-positioning");if(t.length>0){var n=t.find(".pod-positioning-body a").last(),r=n.attr("href");r&&(t.hover(function(){e(this).css("cursor","pointer"),n.css("text-decoration","underline")},function(){n.css("text-decoration","none")}),t.on("click",function(){document.location.href=r}))}},_initTwitter:function(){t.init("Christchurch_NZ",1,".twitter-tweet")},_initRotator:function(){e(".rotator-homepage-item").length&&n.register([{queries:n.queries.all,shouldDegrade:!0,match:function(){r.bind()}}])},_initCarousel:function(){e(".js-carousel-homepage").length&&n.register([{queries:n.queries["small-homepage-carousel-rotator"],shouldDegrade:!1,match:function(){require(["app/ui/carousel/homepage/small","brotator"],function(t){e(document).ready(function(){t.bind()})})},unmatch:function(){require(["app/ui/carousel/homepage/small","brotator"],function(t){e(document).ready(function(){t.unbind()})})}},{queries:n.queries["medium-homepage-carousel-rotator"],shouldDegrade:!1,match:function(){require(["app/ui/carousel/homepage/large","scrollitup"],function(t){e(document).ready(function(){t.bind({itemWidth:164,margin:8,itemsPerView:2})})})},unmatch:function(){require(["app/ui/carousel/homepage/large","scrollitup"],function(e){e.unbind()})}},{queries:n.queries["large-homepage-carousel-rotator"],shouldDegrade:!0,match:function(){require(["app/ui/carousel/homepage/large","scrollitup"],function(t){e(document).ready(function(){t.bind({itemWidth:164,margin:8,itemsPerView:3})})})},unmatch:function(){require(["app/ui/carousel/homepage/large","scrollitup"],function(e){e.unbind()})}}])},_initEqualisation:function(){e(".js-evensteven").length&&n.register([{queries:n.queries.medium,shouldDegrade:!0,match:function(){e(".js-evensteven").evenSteven({resize:!0})},unmatch:function(){e(".js-evensteven").evenSteven("destroy")}}])}}});