define("app/util/cookiemanager",["jquery"],function(e){return{create:function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var i="; expires="+r.toGMTString()}else var i="";document.cookie=e+"="+t+i+"; path=/"},read:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return""},erase:function(e){this.create(e,"",-1)}}}),define("app/ui/tradegallery/imagedata",["jquery","app/util/cookiemanager"],function(e,t){function r(e){if(!e)return;var r=t.read(n),i=undefined;try{i=jQuery.parseJSON(r)}catch(s){}if(r===""||i===null||i===undefined){t.create(n,"{}",7);return}i=jQuery.parseJSON(t.read(n)),e(i)}function i(e){var t=o();t[e.src]=e,u(t)}function s(e){var t=o();delete t[e.src],u(t)}function o(){var e=jQuery.parseJSON(t.read(n));return e===null&&(e={}),e}function u(e){t.create(n,JSON.stringify(e),7)}var n="trade-gallery-media";return{getList:r,addMediaItem:i,removeMediaItem:s}}),define("app/util/utils",[],function(){return{getObjectLength:function(e){var t=0;if(!e)return t;for(var n in e)e.hasOwnProperty(n)&&t++;return t}}}),define("app/ui/tradegallery/imagelibrary",["jquery","app/ui/tradegallery/imagedata","app/ui/mediaqueries/mediaqueries","app/util/utils","pubsub"],function(e,t,n,r){function u(){i=e("#main-content"),s=e("#selection-status").find("span"),o=e("#request-images");var t=i;a(),f(t),l(),c(),i.on("click",".js-media-item-btn",h),o.on("click",function(t){e(this).is(".disabled")&&(t.stopPropagation(),t.preventDefault())})}function a(){e.subscribe("/imagegallery/buttons/init",f)}function f(n){t.getList(function(t){var r=e(n).find("li");if(r.length>0&&t!==null&&!e.isEmptyObject(t))for(var i=0;i<r.length;i++){var s=r[i],o=e(s).find(".js-media-item-btn"),u=o.attr("data-mediaSrc");for(var a in t)t.hasOwnProperty(a)&&u===t[a].src&&p(o)}})}function l(){var n;t.getList(function(t){t!==null&&!e.isEmptyObject(t)?(n=r.getObjectLength(t),s.text(n),o.removeClass("disabled")):(s.text("0"),o.addClass("disabled"))})}function c(){e(".gallery .gallery-item-body").length&&n.register([{queries:n.queries.medium,shouldDegrade:!0,match:function(){require(["evensteven"],function(e){e(".gallery .gallery-item-body").evenSteven({resize:!0})})},unmatch:function(){require(["evensteven"],function(e){e(".gallery .gallery-item-body").evenSteven("destroy")})}}])}function h(n){n.preventDefault();var r=e(this),s={filename:r.attr("data-mediaFile").replace("'",""),src:r.attr("data-mediaSrc"),name:r.attr("data-mediaName"),description:r.attr("data-mediaDescription")},o=i.find('a[data-mediaFile="'+s.filename+'"]');!r.hasClass("selected")&&t.addMediaItem(s),r.hasClass("selected")&&t.removeMediaItem(s),p(r),r.parents("#colorbox").length&&o.length&&p(o),l()}function p(e){var t=e.text(),n=e.attr("title"),r=e.attr("data-altText"),i=e.attr("data-altTitle");e.toggleClass("selected"),e.toggleClass("link-cta-plus"),e.toggleClass("link-cta-minus"),e.text(r).attr("title",i),e.attr("data-altText",t).attr("data-altTitle",n)}var i,s,o;return{init:u,checkButtons:f,toggleButtonState:p}}),define("app/ui/tradegallery/imageselection",["jquery","app/ui/tradegallery/imagedata","app/ui/tradegallery/imagelibrary","app/util/utils","app/ui/lightbox/loader","evensteven"],function(e,t,n,r,i){function o(){s=e("#selected-images"),s.length&&(u(),s.on("click",".js-media-item-btn",f),e.publish("/lazyload/loadimages",[s]),i.init(),e(".main, .aside").evenSteven())}function u(){var n="";t.getList(function(t){var i=0,s=r.getObjectLength(t);if(!e.isEmptyObject(t)){n+="<div class='listing-info'><div class='listing-info-current'><p>You have selected <strong class='js-image-number'>"+c(s)+"</strong></p></div></div>",n+="<div class='gallery-wrapper'><ul class='list-grid gallery self-clear'>";if(t!==null&&!e.isEmptyObject(t))for(var o in t)t.hasOwnProperty(o)&&(i++,n+=a(i,s,t[o]))}else n+="<div class='listing-info'><div class='listing-info-current'><p>You have no images selected</p></div></div>",n+="<div class='gallery-wrapper'><ul class='list-grid gallery self-clear'>";n+="</ul></div>"}),n&&s.html(n)}function a(e,t,n){var r=Math.ceil(t/3),i="";return i+="<li>",i+="<span class='js-lightbox-single js-lightbox-load'>",i+="<a class='gallery-figure figure-image figure-dark js-lightbox-image' title='"+n.name+"' href='"+n.src+"'>",i+="<img class='lazy-auto' width='190' height='100' alt='"+n.name+"' src='/images/placeholder/lazyload/landscape.png' data-original='"+n.src+".width.190.ashx'>",i+="<noscript><img src='"+n.src+"'/></noscript><span class='media-magnify'>&#xe012;</span>",i+="</a>",i+="</span>",i+="<div class='gallery-item-body'>",i+="<h3 class='gallery-item-heading'>"+n.name+"</h3>",i+="<dl class='list-stacked gallery-item-detail'><dd>"+n.description+"</dd></dl>",i+="<a data-alttext='Add' data-alttitle='Add to selection' title='Remove from selection' href='#' class='js-media-item-btn selected link-cta-minus'",i+=" data-mediafile='"+n.filename+"' data-medianame='"+n.name+"' data-mediasrc='"+n.src+"' data-mediadescription='"+n.description+"'>Remove</a>",i+="</div>",i+="</li>",i}function f(r){r.preventDefault();var i=e(this),s={filename:i.attr("data-mediaFile"),src:i.attr("data-mediaSrc"),name:i.attr("data-mediaName"),description:i.attr("data-mediaDescription")};i.hasClass("selected")?t.removeMediaItem(s):t.addMediaItem(s),n.toggleButtonState(i),i.closest("li").remove(),l()}function l(){t.getList(function(t){var n=r.getObjectLength(t);e(".js-image-number").html(c(n))})}function c(e){return e+" image"+(e==0||e>1?"s":"")}var s;return{init:o}}),define("app/ui/page/tradegallery",["jquery","app/ui/tradegallery/imageselection","app/ui/tradegallery/imagelibrary","app/ui/infinitescroll/infinitescroll","app/ui/page/listing"],function(e,t,n,r){r.init(),n.init(),t.init()});