define(["jquery","throttledebounce","brotator"],function(e){var t,n,r;return{bind:function(){function s(){t.data("carousel")?setTimeout(s,50):(i._setData(),t.brotator({content:".js-carousel-content",timeout:8e3,easing:"easeInOutSine",contentSetup:"responsive",animation:"slide",hasMenu:!1,hasButtons:!0,next:".btn-direction-next",previous:".btn-direction-prev",animationSpeed:500,lazyloader:!0,namespace:"/homepage-small-carousel",autorotate:!1}),i._setPodHeight(),i._initResizeEvent())}var i=this;t=e(".js-carousel-homepage"),n=t.find(".pod-carousel-viewport"),r=n.find(".js-carousel-item"),s()},unbind:function(){t.brotator("destroy"),this._removeResizeEvent(),this._resetHeights(),this._removeData()},_setPodHeight:function(){var e=n.width(),t=this._getLargestPod();n.css("padding-bottom",t/e*100+"%")},_resetHeights:function(){n.css("padding-bottom","")},_getLargestPod:function(){var t=0;return r.each(function(){var n=e(this);t<n.height()&&(t=n.height())}),t},_initResizeEvent:function(){e(window).on("resize",e.proxy(e.throttle(250,this._setPodHeight),this))},_removeResizeEvent:function(){e(window).off("resize",this._setPodHeight)},_setData:function(){t.data("carousel","true")},_removeData:function(){t.removeData("carousel")}}});