define(["jquery","lazyload","ajaxInclude","lazyscroll"],function(e){var t,n=".lazy-content",r=".lazy-auto",i,s;return{init:function(){t=this,i=e(n),s=e(r),s.length&&this.loadImages(),i.length&&this.loadContent(),this._initSubscriptions()},loadContent:function(t){t=t instanceof jQuery?t:e(t);if(t.length){var r=t.find(n);this.content(r);return}this.content(i)},loadImages:function(n){t=t||this,n=n instanceof jQuery?n:e(n);if(n.length){var i=n.find(r);t._getImages(i);return}t._getImages(s)},_initSubscriptions:function(){e.subscribe("/lazyload/loadimages",this.loadImages)},_getImages:function(t){if(!t||!t.length)return;t.filter(function(){var t=e(this);return this.src.indexOf(t.attr("data-original"))===-1}).lazyload({effect:"fadeIn",threshold:100,effectspeed:100})},content:function(e){e.lazyScroll({callback:function(){this.$element.ajaxInclude()}})}}});